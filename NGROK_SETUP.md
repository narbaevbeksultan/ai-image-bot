# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ngrok –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Betatransfer callback

## üìã **–ß—Ç–æ —Ç–∞–∫–æ–µ ngrok:**
ngrok —Å–æ–∑–¥–∞–µ—Ç —Ç—É–Ω–Ω–µ–ª—å –∫ –≤–∞—à–µ–º—É –ª–æ–∫–∞–ª—å–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É, –¥–µ–ª–∞—è –µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ —á–µ—Ä–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã–π URL.

## üîß **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ ngrok:**

### **Windows:**
1. **–°–∫–∞—á–∞–π—Ç–µ** —Å https://ngrok.com/download
2. **–†–∞—Å–ø–∞–∫—É–π—Ç–µ** –≤ –ø–∞–ø–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `C:\ngrok`)
3. **–î–æ–±–∞–≤—å—Ç–µ –≤ PATH** –∏–ª–∏ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –∏–∑ –ø–∞–ø–∫–∏

### **macOS/Linux:**
```bash
# –ß–µ—Ä–µ–∑ Homebrew (macOS)
brew install ngrok

# –ò–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ –≤—Ä—É—á–Ω—É—é
wget https://bin.equinox.io/c/bNyj1mQVY4c/ngrok-v3-stable-linux-amd64.tgz
tar -xzf ngrok-v3-stable-linux-amd64.tgz
```

## üöÄ **–ó–∞–ø—É—Å–∫ callback —Å–µ—Ä–≤–µ—Ä–∞:**

### **1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
pip install -r requirements.txt
```

### **2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ callback —Å–µ—Ä–≤–µ—Ä:**
```bash
python callback_server.py
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Callback —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 5000
URL –¥–ª—è callback: http://localhost:5000/payment/callback
```

## üåê **–ó–∞–ø—É—Å–∫ ngrok —Ç—É–Ω–Ω–µ–ª—è:**

### **–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:**
```bash
ngrok http 5000
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Forwarding    https://abc123.ngrok.io -> http://localhost:5000
```

## ‚öôÔ∏è **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ callback URL –≤ Betatransfer:**

### **–í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ Betatransfer –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:**
- **URL –æ–ø–æ–≤–µ—â–µ–Ω–∏—è:** `https://abc123.ngrok.io/payment/callback`
- **URL —É—Å–ø–µ—Ö–∞:** `https://abc123.ngrok.io/payment/success`
- **URL –Ω–µ—É—Å–ø–µ—Ö–∞:** `https://abc123.ngrok.io/payment/fail`

## üîÑ **–û–±–Ω–æ–≤–∏—Ç–µ .env —Ñ–∞–π–ª:**

```env
# –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π ngrok URL
WEBHOOK_BASE_URL=https://abc123.ngrok.io
```

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**

### **1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
```bash
python test_betatransfer.py
```

### **2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ callback —Å–µ—Ä–≤–µ—Ä:**
```bash
curl https://abc123.ngrok.io/health
```

## ‚ö†Ô∏è **–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:**

1. **ngrok URL –º–µ–Ω—è–µ—Ç—Å—è** –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
2. **–û–±–Ω–æ–≤–ª—è–π—Ç–µ URL** –≤ Betatransfer –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**
4. **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –∫—É–ø–∏—Ç–µ –¥–æ–º–µ–Ω**

## üéØ **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å `.env` —Ñ–∞–π–ª
2. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ngrok
3. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å callback —Å–µ—Ä–≤–µ—Ä
4. ‚úÖ –ü–æ–ª—É—á–∏—Ç—å ngrok URL
5. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å callback –≤ Betatransfer
6. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞

## üìû **–ü–æ–¥–¥–µ—Ä–∂–∫–∞:**

- **ngrok:** https://ngrok.com/docs
- **Betatransfer:** support@betatransfer.io
