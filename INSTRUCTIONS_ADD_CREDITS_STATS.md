# üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –∫–æ–º–∞–Ω–¥—ã `/credits_stats`

## üéØ **–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**

–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/credits_stats` –≤ –±–æ—Ç–∞, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫—Ä–µ–¥–∏—Ç–∞–º.

## üìù **–®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤ bot.py**

–ù–∞–π–¥–∏—Ç–µ –≤ —Ñ–∞–π–ª–µ `bot.py` —Ñ—É–Ω–∫—Ü–∏—é `my_id_command` (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∞ 1502) –∏ –ø–æ—Å–ª–µ –Ω–µ—ë –¥–æ–±–∞–≤—å—Ç–µ:

```python
async def credits_stats_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –∫—Ä–µ–¥–∏—Ç–∞–º (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞)"""
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –≤—ã (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à Telegram ID)
    ADMIN_USER_ID = 7735323051  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à ID
    
    if update.effective_user.id != ADMIN_USER_ID:
        await update.message.reply_text("‚ùå –£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥–µ.")
        return
    
    try:
        # –ü–æ–ª—É—á–∞–µ–º –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫—Ä–µ–¥–∏—Ç–∞–º
        stats = analytics_db.get_total_credits_statistics()
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        stats_text = f"""ü™ô **–°–¢–ê–¢–ò–°–¢–ò–ö–ê –ö–†–ï–î–ò–¢–û–í –ë–û–¢–ê**

üìä **–û–ë–©–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê:**
‚Ä¢ üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∫—Ä–µ–¥–∏—Ç–∞–º–∏: {stats['total_users']}
‚Ä¢ ü™ô –í—Å–µ–≥–æ –∫—É–ø–ª–µ–Ω–æ –∫—Ä–µ–¥–∏—Ç–æ–≤: {stats['total_purchased']:,}
‚Ä¢ üí∏ –í—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∫—Ä–µ–¥–∏—Ç–æ–≤: {stats['total_used']:,}
‚Ä¢ üí∞ –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å –∫—Ä–µ–¥–∏—Ç–æ–≤: {stats['total_balance']:,}

üí∞ **–§–ò–ù–ê–ù–°–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê:**
‚Ä¢ üìà –í—Å–µ–≥–æ –ø–ª–∞—Ç–µ–∂–µ–π: {stats['total_payments']}
‚Ä¢ ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π: {stats['completed_payments']}
‚Ä¢ üíµ –û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞: ‚ÇΩ{stats['total_revenue']:,.2f}
‚Ä¢ üíµ –í—ã—Ä—É—á–∫–∞ —Å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö: ‚ÇΩ{stats['completed_revenue']:,.2f}

üîÑ **–¢–†–ê–ù–ó–ê–ö–¶–ò–ò:**
‚Ä¢ üìù –í—Å–µ–≥–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π: {stats['total_transactions']}
‚Ä¢ ‚ûï –ü–æ–∫—É–ø–∫–∏: {stats['total_purchased_transactions']:,}
‚Ä¢ ‚ûñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: {stats['total_used_transactions']:,}

üí° **–î–õ–Ø –ü–û–ü–û–õ–ù–ï–ù–ò–Ø REPLICATE/OPENAI:**
üî• –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—É–ø–ª–µ–Ω–Ω—ã—Ö –∫—Ä–µ–¥–∏—Ç–æ–≤: **{stats['total_purchased']:,}**
üí∞ –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ø–æ–ª–Ω–∏—Ç—å –Ω–∞ —Å—É–º–º—É: **‚ÇΩ{stats['completed_revenue']:,.2f}**

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –ü–æ–ø–æ–ª–Ω—è–π—Ç–µ Replicate –∏ OpenAI –Ω–∞ —Å—É–º–º—É, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –æ–±—â–µ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∫—É–ø–ª–µ–Ω–Ω—ã—Ö –∫—Ä–µ–¥–∏—Ç–æ–≤, —á—Ç–æ–±—ã –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–∏ –∫—Ä–µ–¥–∏—Ç—ã!"""
        
        await update.message.reply_text(stats_text, parse_mode='Markdown')
        
    except Exception as e:
        logging.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫—Ä–µ–¥–∏—Ç–æ–≤: {e}")
        await update.message.reply_text("‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")
```

## üîß **–®–∞–≥ 2: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É**

–ù–∞–π–¥–∏—Ç–µ –≤ —Ñ–∞–π–ª–µ `bot.py` —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∫–æ–º–∞–Ω–¥ (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∞ 30814) –∏ –ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏:

```python
app.add_handler(CommandHandler('admin_stats', admin_stats_command))
```

–î–æ–±–∞–≤—å—Ç–µ:

```python
app.add_handler(CommandHandler('credits_stats', credits_stats_command))  # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫—Ä–µ–¥–∏—Ç–∞–º
```

## ‚úÖ **–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**

–í —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–º–µ–Ω–∏—Ç–µ `ADMIN_USER_ID = 7735323051` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π Telegram ID.

## üéâ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤—ã —Å–º–æ–∂–µ—Ç–µ:
- –ù–∞–ø–∏—Å–∞—Ç—å –≤ –±–æ—Ç–∞ `/credits_stats`
- –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫—Ä–µ–¥–∏—Ç–∞–º
- –£–≤–∏–¥–µ—Ç—å, —Å–∫–æ–ª—å–∫–æ –∫—Ä–µ–¥–∏—Ç–æ–≤ –Ω—É–∂–Ω–æ –ø–æ–ø–æ–ª–Ω–∏—Ç—å –≤ Replicate/OpenAI

## üìç **–ì–¥–µ –∏—Å–∫–∞—Ç—å:**

1. **–§—É–Ω–∫—Ü–∏—è `my_id_command`** - –ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∞ 1502
2. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥** - –ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∞ 30814
3. **–í–∞—à Telegram ID** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/my_id` –≤ –±–æ—Ç–µ

## ‚ö†Ô∏è **–í–∞–∂–Ω–æ:**

- –ö–æ–º–∞–Ω–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –≤–∞–º
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –≤–∏–¥—è—Ç —ç—Ç—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- –§—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ Railway (–≥–¥–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –±–æ—Ç)
